#!/bin/sh
#
# (c) 2021 Yoichi Tanibayashi
#

MY_PKG="mypkg"

MY_VERSION="0.0.1"
VENVDIR="/home/ytani/env2-musicbox"
WORKDIR="/home/ytani/mypkg"
WEBROOT="/home/ytani/mypkg/webroot"

#
# main
#
if [ x$VIRTUAL_ENV != x$VENVDIR ]; then
    ACTIVATE=$VENVDIR/bin/activate
    if [ -f $ACTIVATE ]; then
        . $ACTIVATE
    else
        echo
        echo "ERROR(venv): can not activate python3 Virtualenv"
        echo
        exit 1
    fi
fi
echo "(VIRTUAL_ENV=$VIRTUAL_ENV)"

if [ x$1 = xwebapp ]; then
    shift
    exec python -m $MY_PKG webapp \
         --version $MY_VERSION \
         --workdir $WORKDIR --webroot $WEBROOT $*
else
    exec python -m $MY_PKG $*
fi


### Local Variables: ***
### mode:shell-script ***
### End: ***
